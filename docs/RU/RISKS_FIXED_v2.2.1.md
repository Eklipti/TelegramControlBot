# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ –≥—Ä–∞–±–ª–∏ v2.2.1

## üîß –û–±–∑–æ—Ä –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

–í –≤–µ—Ä—Å–∏–∏ 2.2.1 –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏ –∏ –≥—Ä–∞–±–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

## üìÅ –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞
–ü—É—Ç–∏ –∫ `DEFAULT_PATHS.json` —Ä–µ–∑–æ–ª–≤–∏–ª–∏—Å—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `cwd` (—Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏), —á—Ç–æ –º–æ–≥–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.

### –†–µ—à–µ–Ω–∏–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_project_root()` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ `pyproject.toml`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –ø—É—Ç–µ–π:
  - `get_default_paths_file()`
  - `get_paths_config_file()`
  - `get_logs_directory()`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `ensure_directories()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –ø—É—Ç–µ–π

### –†–µ–∑—É–ª—å—Ç–∞—Ç
–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

## üñ•Ô∏è –ö–æ–¥–∏—Ä–æ–≤–∫–∞ Windows

### –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –∫–æ–¥–∏—Ä–æ–≤–∫–∞ `utf-8`, —á—Ç–æ –ª–æ–º–∞–ª–æ CLI-–≤—ã–≤–æ–¥ –Ω–∞ Windows —Å —Ä—É—Å—Å–∫–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏.

### –†–µ—à–µ–Ω–∏–µ
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –¥–µ—Ñ–æ–ª—Ç –Ω–∞ `cp866` –¥–ª—è Windows, `utf-8` –¥–ª—è Unix-—Å–∏—Å—Ç–µ–º
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –≤–∞–ª–∏–¥–∞—Ç–æ—Ä `set_windows_encoding()` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ cp866

### –†–µ–∑—É–ª—å—Ç–∞—Ç
–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ Windows.

## üìù –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞

### –ü—Ä–æ–±–ª–µ–º–∞
–õ–æ–≥–≥–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `logs/`, —á—Ç–æ –º–æ–≥–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

### –†–µ—à–µ–Ω–∏–µ
- ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω –≤—ã–∑–æ–≤ `settings.ensure_directories()` –î–û `init_logging()`
- ‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –ª–æ–≥–≥–µ—Ä–∞

### –†–µ–∑—É–ª—å—Ç–∞—Ç
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üîÑ –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã

### –ü—Ä–æ–±–ª–µ–º–∞
–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –≤ handlers –ø—Ä–∏ —Å–±–æ—Ä–∫–µ router –º–æ–≥–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π.

### –†–µ—à–µ–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω `app/handlers/registration.py` - –µ–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ handlers
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `app/app.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `register_all_handlers(dp)`
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö handlers

### –†–µ–∑—É–ª—å—Ç–∞—Ç
–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —É–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.

## üñ•Ô∏è Headless —Ä–µ–∂–∏–º

### –ü—Ä–æ–±–ª–µ–º–∞
GUI –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å—Ä–∞–∑—É, –≤—ã–∑—ã–≤–∞—è –æ—à–∏–±–∫–∏ –≤ headless –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (CI/CD).

### –†–µ—à–µ–Ω–∏–µ
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ª–µ–Ω–∏–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã:
  - `lazy_import_cv2()`
  - `lazy_import_pyautogui()`
  - `lazy_import_pil()`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã handlers –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–µ–Ω–∏–≤—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç
–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ headless —Ä–µ–∂–∏–º–µ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏.

## üß™ –ü–ª–∞–Ω—ã –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã
- **Unit —Ç–µ—Å—Ç—ã** –¥–ª—è `app.core.security`
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã** –¥–ª—è handlers —Å –º–æ–∫–∞–º–∏ Aiogram
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Smoke —Ç–µ—Å—Ç—ã** —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤

### –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **Smoke —Ç–µ—Å—Ç—ã**: –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- **Unit —Ç–µ—Å—Ç—ã**: –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- **Headless —Ç–µ—Å—Ç—ã**: –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- **GUI —Ç–µ—Å—Ç—ã**: –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è

## üìö –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã
- ‚úÖ `docs/MIGRATION_v2.2.md` - –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ä–∏—Å–∫–∞—Ö
- ‚úÖ `docs/CONFIG.md` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—É—Ç—è–º–∏
- ‚úÖ `docs/HEADLESS.md` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ª–µ–Ω–∏–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ —É–ª—É—á—à–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
- ‚úÖ `docs/DEVELOPMENT.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤
- ‚úÖ `docs/CHANGELOG.md` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è 2.2.1
- ‚úÖ `README.md` –∏ `README_ru.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã:
- ‚úÖ –ü—É—Ç–∏ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ Windows –∫–æ–¥–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (cp866)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- ‚úÖ –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ Headless —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏
- ‚úÖ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!
