# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ ControlBot v2.2.0

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 2.2.0 –∏ –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

```
app/
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å Pydantic Settings
‚îú‚îÄ‚îÄ core/            # –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ handlers/        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Telegram –∫–æ–º–∞–Ω–¥
‚îî‚îÄ‚îÄ services/        # –°–µ—Ä–≤–∏—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –°—Ç–∞—Ä–æ–µ –∏–º—è | –ù–æ–≤–æ–µ –∏–º—è | –ü—Ä–∏—á–∏–Ω–∞ |
|------------|-----------|---------|
| `handlers/docs_photos.py` | `handlers/attachments.py` | –ë–æ–ª–µ–µ –æ–±—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ |
| `handlers/find_cmd.py` | `handlers/command_search.py` | –ì–ª–∞–≥–æ–ª+—Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ |
| `handlers/rdp.py` | `handlers/remote_desktop.py` | –ë–æ–ª–µ–µ —è–≤–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ |
| `handlers/security.py` | `handlers/security_handlers.py` | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ |
| `handlers/paths.py` | `handlers/paths_handlers.py` | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ |

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API

### –°–∏—Å—Ç–µ–º–∞ –ø—É—Ç–µ–π

**–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±:**
```python
from app.paths_config import PATHS, save_paths

PATHS["my_app"] = "/path/to/app"
save_paths(PATHS)
```

**–ù–æ–≤—ã–π —Å–ø–æ—Å–æ–±:**
```python
from app.config.paths import get_paths_config

config = get_paths_config()
config.add_user_path("my_app", "/path/to/app")
```

**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
```python
# –°—Ç–∞—Ä—ã–π API –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
from app.paths_config import PATHS, save_paths
```

### –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±:**
```python
from app.security import get_confirmation_manager
```

**–ù–æ–≤—ã–π —Å–ø–æ—Å–æ–±:**
```python
from app.core.security import get_confirmation_manager
```

**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
```python
# –°—Ç–∞—Ä—ã–π API –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
from app.security import get_confirmation_manager
```

## üìÅ –ü–µ—Ä–µ–º–µ—â–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `ControlBot.bat` ‚Üí `scripts/windows/ControlBot.bat`

## ‚úÖ –ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

- –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ API —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥ Telegram
- –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏** –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:
   - `app/config/paths.py` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—É—Ç—è–º–∏
   - `app/core/security.py` –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

2. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è**:
   - –°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
   - –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –≤–∞—à–µ–º –∫–æ–¥–µ
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–µ –ø—É—Ç–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

## ‚ö†Ô∏è Deprecated –º–æ–¥—É–ª–∏ (—à–∏–º—ã)

–°–ª–µ–¥—É—é—â–∏–µ –º–æ–¥—É–ª–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ deprecated –∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –≤ –≤–µ—Ä—Å–∏–∏ 2.4.0:

| Deprecated –º–æ–¥—É–ª—å | –ù–æ–≤—ã–π –º–æ–¥—É–ª—å | –°—Ä–æ–∫ –∂–∏–∑–Ω–∏ |
|-------------------|--------------|------------|
| `app.config` | `app.config` | –î–æ v2.4.0 |
| `app.security` | `app.core.security` | –î–æ v2.4.0 |
| `app.paths_config` | `app.config.paths` | –î–æ v2.4.0 |

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ deprecated –º–æ–¥—É–ª–µ–π:

- –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ deprecated –º–æ–¥—É–ª—è –≤—ã–≤–æ–¥–∏—Ç—Å—è `DeprecationWarning`
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ deprecated —Ñ—É–Ω–∫—Ü–∏–π —Ç–∞–∫–∂–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è `DeprecationWarning`
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –í—Å–µ deprecated –º–æ–¥—É–ª–∏ —è–≤–ª—è—é—Ç—Å—è —à–∏–º–∞–º–∏ —Å —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–æ–º –∏–∑ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π

### –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏:

1. **v2.2.0 - v2.3.x**: Deprecated –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏
2. **v2.4.0**: Deprecated –º–æ–¥—É–ª–∏ –±—É–¥—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã
3. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –¥–æ v2.4.0

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ –≥—Ä–∞–±–ª–∏ (v2.2.1)

### –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—É—Ç–∏ –∫ `DEFAULT_PATHS.json` —Ä–µ–∑–æ–ª–≤–∏–ª–∏—Å—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `cwd`, —á—Ç–æ –º–æ–≥–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `get_project_root()`, `get_default_paths_file()`, `get_paths_config_file()`, `get_logs_directory()` –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –ø—É—Ç–µ–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
- **–í–ª–∏—è–Ω–∏–µ**: –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### –ö–æ–¥–∏—Ä–æ–≤–∫–∞ Windows
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å `utf-8`, —á—Ç–æ –ª–æ–º–∞–ª–æ CLI-–≤—ã–≤–æ–¥ –Ω–∞ Windows
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω –¥–µ—Ñ–æ–ª—Ç –Ω–∞ `cp866` –¥–ª—è Windows, `utf-8` –¥–ª—è Unix-—Å–∏—Å—Ç–µ–º
- **–í–ª–∏—è–Ω–∏–µ**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä—É—Å—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ Windows

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
- **–ü—Ä–æ–±–ª–µ–º–∞**: –õ–æ–≥–≥–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `logs/`
- **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–º–µ—â–µ–Ω –≤—ã–∑–æ–≤ `settings.ensure_directories()` –î–û `init_logging()`
- **–í–ª–∏—è–Ω–∏–µ**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

### –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã
- **–ü—Ä–æ–±–ª–µ–º–∞**: –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –≤ handlers –ø—Ä–∏ —Å–±–æ—Ä–∫–µ router
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω `app/handlers/registration.py` - –µ–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ handlers
- **–í–ª–∏—è–Ω–∏–µ**: –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —É–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Headless —Ä–µ–∂–∏–º
- **–ü—Ä–æ–±–ª–µ–º–∞**: GUI –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å—Ä–∞–∑—É, –≤—ã–∑—ã–≤–∞—è –æ—à–∏–±–∫–∏ –≤ headless –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- **–†–µ—à–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ª–µ–Ω–∏–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã —Å –≤–Ω—è—Ç–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏:
  - `lazy_import_cv2()`, `lazy_import_pyautogui()`, `lazy_import_pil()`
  - –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- **–í–ª–∏—è–Ω–∏–µ**: –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ headless —Ä–µ–∂–∏–º–µ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
